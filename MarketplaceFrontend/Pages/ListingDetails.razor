@page "/listing/{Id:guid}"
@using MarketplaceAPI.Models
@inject HttpClient Http
@layout MainLayout

<h3>Listing Details</h3>

@if (listing == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div>
        <img src="@listing.ImageUrl" alt="@listing.Title" width="300" />
        <h4>@listing.Title</h4>
        <p>@listing.Description</p>
        <p>Price: $@listing.Price</p>
        <p>Category: @listing.Category</p>
        <p>Seller: @listing.UserName</p>
    </div>
}

@code {
    [Parameter]
    public Guid Id { get; set; }

    private ListingResponseDto? listing;

    protected override async Task OnInitializedAsync()
    {
        listing = await Http.GetFromJsonAsync<ListingResponseDto>($"api/listings/{Id}");
    }
}
